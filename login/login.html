<script type="text/javascript">
    const CONTRACT_ID = $CONTRACT_ID$;
    const CALLBACK_URL = $CALLBACK_URL$;
</script>

<script src="./login.js" type="text/javascript"></script>

<body>
    <h1>Login using wallet</h1>
    <ul class="wallet-list">
    </ul>
</body>

<script type="text/javascript">
    async function signIn(key) {
        localStorage.setItem('web4_wallet', key);
        await window.wallets[key].signIn({ contractId: CONTRACT_ID, callbackUrl: CALLBACK_URL });
    }

    document.querySelector('.wallet-list').innerHTML = 
        Object.keys(window.wallets)
            .map(key => {
                const { name } = window.wallets[key];
                return `<li><a href="#" onclick='signIn(${JSON.stringify(key)})'>${name}</a></li>`;
            }).join('\n');
</script>